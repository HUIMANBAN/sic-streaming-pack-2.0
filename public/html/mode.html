<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>模式选择</title>
    <link rel="icon" href="../image/title-logo/mode.png" type="image/x-icon">
    <link rel="stylesheet" href="../css/mode.css" type="text/css">
</head>
<body>
<div class="mode-wrapper">
    <div id="choice">
        <div class="mode selected" id="LandscapeMode" data-index="0">横屏模式</div>
        <div class="mode" id="PortraitMode" data-index="1">竖屏模式</div>
    </div>
    <div class="btn">确认</div>
</div>

<script src="../library/axios.js"></script>

<script>
    // 模式选择
    let index = '0';
    let name = '横屏模式';

    let modes = document.querySelectorAll('.mode');
    modes.forEach((mode) => {
        mode.addEventListener('click', function () {
            document.querySelector('.selected').classList.remove('selected');
            this.classList.add('selected');
            index = this.dataset.index;
            name = this.innerHTML;
        });
    });
    document.addEventListener('keydown', function (event) {
        if (event.key === 'Tab') {
            event.preventDefault();
            modes.forEach((mode) => {
                mode.classList.toggle('selected');
            });
        }
        const selected = document.querySelector('.selected');
        index = selected.dataset.index;
        name = selected.innerHTML;

    });

    function req() {
        axios({
            params: {
                mode: index
            },
            method: 'post',
            url: '/choice',
            data: {
                mode: index,
                name: name
            }
        }).then(response => {
            if (response.data === 0) {
                window.open('/settings');
            } else if (response.data === 1) {
                window.open('/settings_portrait')
            }


        }).catch(err => {
            throw err;
        });
    }

    //点击发送
    const btn = document.querySelector('.btn');
    btn.addEventListener('click', () => {
        req();

    });
    document.addEventListener('keydown', function (event) {
        if (event.key === 'Enter') {
            req();
        }


    });
</script>
<script src="../js/refresh.js"></script>
</body>
</html>